## Total Trade CPC

**Author: Alex Matrunich, Marco Garieri, Bo Werth, Christian Mongeau**

**Description:**

The trade module is divided in two submodules: **complete\_tf\_cpc** and
**total\_trade\_CPC**. Each module is year specific. This means that, at the
time being, the trade module run indipendently for each year. In order to
run the **tt total\_trade\_CPC**, the output of **complete\_tf\_cpc** is
needed.

This module aggregates total trade flow by reporting country for partners
countries to a single total trade for each unique CPC commodity code. The
module save the ouput into the dataset **total\_trade\_cpc\_m49**,
within the **Trade** domain.

Change Log:

- add unit values using **flagMethod** `i`
- extend **flagWeightTable** with `X`



### Import Data from Complete TF CPC

Import monetary values and quantities from data previously generated by
**complete_tf_cpc** module.

1. `5608`: Import Quantity (heads)
2. `5609`: Import Quantity (1000 heads)
3. `5610`: Import Quantity (tonne)
4. `5908`: Export Quantity (heads)
5. `5909`: Export Quantity (1000 heads)
6. `5910`: Export Quantity (tonne)
7. `5622`: Imports (US$)
8. `5922`: Exports (US$)



### Aggregate values across partner dimension

- ignore missing values in aggregation
- aggregate observation flags using the `flagWeightTable`
- set `flagMethod` to `s` for $US values and quantity measures calculated as sum


|flagObservationStatus | flagObservationWeights|
|:---------------------|----------------------:|
|                      |                   1.00|
|X                     |                   0.90|
|T                     |                   0.80|
|E                     |                   0.75|
|I                     |                   0.50|
|M                     |                   0.00|


### Calculate Unit Values

Calculate unit value (US$ per quantity unit) at CPC level if the quantity is
larger than zero

1. `5630`: Import Unit Value (US$ / tonne)
2. `5638`: Import Unit Value (US$ / heads)
3. `5639`: Import Unit Value (US$ / 1000 heads)
4. `5930`: Export Unit Value (US$ / tonne)
5. `5938`: Export Unit Value (US$ / heads)
6. `5939`: Export Unit Value (US$ / 1000 heads)

- use `flagObservationsStatus` from quantity measures
- set `flagMethod` to `i` for unit values calculated as identity



